#! /usr/bin/python
# $Id$
#################################################################
#	Default %pre Script
#################################################################

class Prep(object):

	pctend = '%end'

	#########################################################
	#	Initialize: Reset Hash
	#########################################################

	def __init__(self):
		self.vars	= {
			'host': 'HOST=',
			'part': 'PART=',
			'syst': 'SYST=',
			'type': 'TYPE=',
		}

	#########################################################
	#	Save Definitions For Later
	#########################################################

	def defs(self):
		vars = self.vars
		return  '\n'.join([
			'cat > /tmp/ks.env <<EOF',
			'\n'.join(vars.values()),
			'EOF',
			####reduce(lambda x,y: x + ('%s\n' % (y, vars[y])),
			####	vars.values(), '') + 'EOF',
			''
		])

	#########################################################
	#	Get Script(s)
	#########################################################

	def script(self):
		return '\n'.join([
			'##############################',
			'#### PRE SCRIPT GOES HERE ####',
			'##############################',
			''
		])

	#########################################################
	#	Represent: return kickstart network line
	#########################################################

	def __repr__(self):
		return '\n'.join([
			'#### BEG Pre ####',
"""
%pre
#! /bin/sh

exec 1>/tmp/pre.log 2>&1
set -x
""",
			self.defs(),
			self.script(),
			self.pctend,
			'#### END Pre ####',
			''
		])

#################################################################
#	UNIT TEST
#################################################################

if __name__ == '__main__': print Prep()

#################################################################
