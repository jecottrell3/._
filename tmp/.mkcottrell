#! /bin/sh

case $1 in
(noaa)	rbj=jcottrell
	uid=7610
	gid=1009
	grp=sysadm
	sub=;;
(nih)	rbj=cottrell
	uid=200115213
	sub=;;
(home)	rbj=jcottrell
	uid=654
	sub=${1:+/$1};;
(*)	echo "usage: $0 noaa | nih | home}"
	exit 1;;
esac

top=/home
gid=${gid:-$uid}
grp=${grp:-$rbj}
dir=$top/$rbj$sub

grep -q :$gid: /etc/group ||
echo groupadd -g $gid $grp

grep -q wheel /etc/group && SUDO='-G wheel' # Red Hat
grep -q sudo  /etc/group && SUDO='-G sudo'  # Ubuntu

grep -q :$uid: /etc/passwd ||
{
	echo mkdir -p		$dir
	echo chown $uid:$gid	$dir
	echo chmod 2755		$dir

	echo useradd -u $uid -g $gid $SUDO -c 'Jim Cottrell' \
		-o -d $dir -s /bin/bash \
		-p '$1$W4V.6jvA$lVqS2WtLVws8CXUr7Mhwc0' $rbj
}
