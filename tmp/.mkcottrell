#! /bin/sh -x

case $1 in
(nih)	rbj=cottrell
	uid=200115213
	sub=;;
(*)	rbj=jcottrell
	uid=654
	sub=${1:+/$1};;
esac

top=/home
gid=${gid:-$uid}
dir=$top/$rbj$sub

grep $rbj: /etc/group ||
groupadd -g $gid $rbj

grep wheel /etc/group && SUDO='-G wheel' # Red Hat
grep sudo  /etc/group && SUDO='-G sudo'  # Ubuntu

grep $rbj: /etc/passwd ||
{
	mkdir -p	$dir
	chown $uid:$gid	$dir
	chmod 2755	$dir

	useradd -u $uid -g $gid $SUDO -c 'Jim Cottrell' \
		-o -d $dir -s /bin/bash \
		-p '$1$W4V.6jvA$lVqS2WtLVws8CXUr7Mhwc0' $rbj
}
