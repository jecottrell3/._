#! /bin/sh
# either  [1] source bin/fixpath VAR
# or else [2] eval $(fixpath VAR)

# Fixes VAR (default PATH)
# Duplicates Deleted
# Non-existent paths Deleted
# NOTE: . Appended at End

ARGS="$@"			# preserve args
((DEBUG)) && echo ARGS: $# "$@"

set $* --			# allow -x
VAR=${1:-PATH}			# assume PATH
eval set -- \${${VAR}//:/ }	# avoids IFS

VAL=
for DIR
do
	test -d $DIR || continue
	case :$VAL: in
	(*:$DIR:*)	continue;;
	(*)		VAL=$VAL:$DIR
	esac
done

echo $VAR=${VAL#:}		# for eval
eval $VAR=${VAL#:}		# for source

set -- "$ARGS"			# restore args
((DEBUG)) && echo ARGS: $# "$@"
